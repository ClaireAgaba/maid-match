# âœ… Maid Verification Status Banners - COMPLETE!

## ğŸ¯ **Overview**

Added **verification status banners** to the maid dashboard to clearly show whether their account is verified, pending verification, or disabled.

---

## ğŸ¨ **Three Banner Types**

### **1. Pending Verification Banner** âš ï¸ (Yellow)
**Shows when:** Account is not yet verified

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ›¡ï¸  Account Pending Verification            â”‚
â”‚                                             â”‚
â”‚ Your account is currently under review.     â”‚
â”‚ Please ensure you have uploaded all         â”‚
â”‚ required documents (ID and certificates)    â”‚
â”‚ in your profile settings. Once verified,    â”‚
â”‚ you'll be able to apply for jobs.          â”‚
â”‚                                             â”‚
â”‚ [Complete Your Profile â†’]                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Features:**
- Yellow background with yellow border
- Shield icon
- Clear explanation
- Link to profile settings
- Encourages document upload

---

### **2. Verified Banner** âœ“ (Blue)
**Shows when:** Account is verified by admin

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ›¡ï¸âœ“  âœ“ Account Verified                     â”‚
â”‚                                             â”‚
â”‚ Your account has been verified by our       â”‚
â”‚ admin team. You can now browse and apply    â”‚
â”‚ for jobs!                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Features:**
- Blue background with blue border
- ShieldCheck icon
- Positive confirmation message
- Encourages job browsing

---

### **3. Account Disabled Banner** ğŸš« (Red)
**Shows when:** Account is disabled by admin

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸš«  Account Disabled                        â”‚
â”‚                                             â”‚
â”‚ Your account has been temporarily disabled. â”‚
â”‚ Please contact support for more information.â”‚
â”‚                                             â”‚
â”‚ Reason: [Admin's disable reason]            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Features:**
- Red background with red border
- Ban icon
- Shows disable reason (if provided)
- Directs to contact support

---

## ğŸ“ **Banner Placement**

Banners appear at the **top of the dashboard**, right after the welcome message and before the profile card:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Welcome back, maid1!                â”‚
â”‚ Browse available jobs...            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [âš ï¸ VERIFICATION BANNER HERE]       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Profile Card                        â”‚
â”‚ [Photo] Name, Location              â”‚
â”‚ ...                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¯ **Display Logic**

### **Priority Order:**
1. **Disabled Banner** (Highest priority)
   - If `is_enabled = false`, show red banner
   - Overrides other banners

2. **Verified Banner**
   - If `is_verified = true` AND `is_enabled = true`
   - Show blue banner

3. **Pending Verification Banner**
   - If `is_verified = false` AND `is_enabled = true`
   - Show yellow banner

### **Code Logic:**
```javascript
// Disabled takes priority
{!maidProfile.is_enabled && (
  <RedDisabledBanner />
)}

// Then verified
{maidProfile.is_verified && maidProfile.is_enabled && (
  <BlueVerifiedBanner />
)}

// Then pending
{!maidProfile.is_verified && maidProfile.is_enabled && (
  <YellowPendingBanner />
)}
```

---

## ğŸ’» **Technical Implementation**

### **Banner Component Structure:**
```jsx
<div className="bg-yellow-50 border-l-4 border-yellow-400 p-4 mb-6">
  <div className="flex">
    <div className="flex-shrink-0">
      <Shield className="h-5 w-5 text-yellow-400" />
    </div>
    <div className="ml-3">
      <h3 className="text-sm font-medium text-yellow-800">
        Account Pending Verification
      </h3>
      <div className="mt-2 text-sm text-yellow-700">
        <p>Message text...</p>
      </div>
      <div className="mt-4">
        <button onClick={() => navigate('/profile-settings')}>
          Complete Your Profile â†’
        </button>
      </div>
    </div>
  </div>
</div>
```

---

## ğŸ¨ **Color Schemes**

### **Pending (Yellow):**
- Background: `bg-yellow-50`
- Border: `border-yellow-400`
- Icon: `text-yellow-400`
- Title: `text-yellow-800`
- Text: `text-yellow-700`

### **Verified (Blue):**
- Background: `bg-blue-50`
- Border: `border-blue-400`
- Icon: `text-blue-400`
- Title: `text-blue-800`
- Text: `text-blue-700`

### **Disabled (Red):**
- Background: `bg-red-50`
- Border: `border-red-400`
- Icon: `text-red-400`
- Title: `text-red-800`
- Text: `text-red-700`

---

## ğŸ“‹ **User Journey**

### **New Maid Registration:**
```
1. Maid registers account
   â†’ Shows: Yellow "Pending Verification" banner
   â†’ Action: Upload documents

2. Maid uploads ID and certificates
   â†’ Still shows: Yellow banner
   â†’ Waiting for admin review

3. Admin verifies account
   â†’ Shows: Blue "Account Verified" banner
   â†’ Action: Browse jobs!

4. Maid can now apply for jobs âœ…
```

### **Account Disabled:**
```
1. Admin disables account
   â†’ Shows: Red "Account Disabled" banner
   â†’ Shows reason if provided

2. Maid contacts support
   â†’ Issue resolved

3. Admin enables account
   â†’ Shows: Blue "Account Verified" banner
   â†’ Maid can apply for jobs again âœ…
```

---

## ğŸ¯ **Benefits**

| Benefit | Impact |
|---------|--------|
| **Clear Status** | Maid knows exactly where they stand |
| **Actionable** | Links to complete profile |
| **Transparent** | Shows disable reason |
| **Encouraging** | Positive message when verified |
| **Visual** | Color-coded for quick understanding |
| **Informative** | Explains what to do next |

---

## ğŸ“± **Responsive Design**

### **Desktop:**
- Full banner width
- All text visible
- Icons on left

### **Mobile:**
- Stacks vertically
- Text wraps naturally
- Icons remain visible
- Buttons stack

---

## ğŸ” **Banner Messages**

### **Pending Verification:**
```
"Your account is currently under review. Please ensure 
you have uploaded all required documents (ID and 
certificates) in your profile settings. Once verified, 
you'll be able to apply for jobs."
```

### **Verified:**
```
"Your account has been verified by our admin team. 
You can now browse and apply for jobs!"
```

### **Disabled:**
```
"Your account has been temporarily disabled. Please 
contact support for more information."

Reason: [Admin's reason]
```

---

## ğŸ§ª **Testing Scenarios**

### **Test 1: New Maid**
```
1. Register as new maid
2. Login to dashboard
3. Should see: Yellow "Pending Verification" banner
4. Click "Complete Your Profile"
5. Should navigate to profile settings
```

### **Test 2: Verified Maid**
```
1. Admin verifies maid account
2. Maid logs in
3. Should see: Blue "Account Verified" banner
4. No action button (already verified)
```

### **Test 3: Disabled Maid**
```
1. Admin disables maid account with reason
2. Maid logs in
3. Should see: Red "Account Disabled" banner
4. Should show disable reason
5. No action button (must contact support)
```

---

## âœ… **Status**

| Feature | Status |
|---------|--------|
| **Pending Banner** | âœ… Complete |
| **Verified Banner** | âœ… Complete |
| **Disabled Banner** | âœ… Complete |
| **Color Coding** | âœ… Complete |
| **Icons** | âœ… Complete |
| **Action Buttons** | âœ… Complete |
| **Responsive** | âœ… Complete |

---

## ğŸ¯ **User Experience**

### **Before:**
- Maid doesn't know verification status
- No clear indication of account state
- Confusion about why can't apply for jobs

### **After:**
- âœ… Clear visual banner
- âœ… Knows exact status
- âœ… Understands what to do next
- âœ… Can take action immediately

---

## ğŸ’¡ **Best Practices**

### **For Maids:**
1. âœ… Check dashboard for verification status
2. âœ… Upload all required documents
3. âœ… Wait for admin verification
4. âœ… Contact support if disabled

### **For System:**
1. âœ… Show status prominently
2. âœ… Provide clear actions
3. âœ… Explain reasons
4. âœ… Use color coding

---

## **Future Enhancements**

### **Possible Additions:**
- **Email Notifications** - When status changes
- **Progress Bar** - Show verification progress
- **Checklist** - Required documents checklist
- **Timeline** - Estimated verification time
- **Chat Support** - Direct support link
- **Push Notifications** - Mobile alerts

---

## **Maid Onboarding Payment (Pesapal Mobile Money)**

### **Overview**
- Added a one-time **onboarding payment** for maids, collected via **Pesapal Mobile Money** (MTN / Airtel).
- Amount: **UGX 5,000**.
- Purpose: helps cover verification and onboarding processing.

### **Where it appears (Maid Dashboard)**
- New **"Onboarding Payment"** card in the maid dashboard stats section:
  - Shows **"Not paid"** / **"Paid (UGX 5,000)"**.
  - If not paid, shows helper text: *"Pay a one-time onboarding fee of UGX 5,000 to help us verify your account."*
- A **"Pay UGX 5,000"** button opens a payment modal.

### **Payment Flow (Maid)**
1. Maid opens dashboard and sees **Onboarding Payment: Not paid**.
2. Clicks **"Pay UGX 5,000"**.
3. Modal appears:
   - Select **Network**: MTN Mobile Money / Airtel Money.
   - Enter **Mobile Money number** they are paying from.
4. On submit, the app:
   - Calls backend `POST /api/payments/maid-onboarding/initiate/`.
   - Backend creates a `MobileMoneyTransaction` and calls **Pesapal SubmitOrderRequest**.
   - Backend returns status + a **Pesapal `redirect_url`**.
5. Frontend automatically opens **Pesapal checkout in a new tab** using `redirect_url`.
6. On Pesapal page, maid selects provider and confirms payment.
7. MTN/Airtel sends a **Mobile Money PIN prompt** to the maidâ€™s phone.
8. Once payment completes, Pesapal sends an **IPN callback** to `/api/payments/pesapal/ipn/`.
9. Backend verifies status with **GetTransactionStatus** and, if successful:
   - Marks `onboarding_fee_paid = True` and sets `onboarding_fee_paid_at` on `MaidProfile`.
   - Updates `MobileMoneyTransaction.status` to **successful**.

### **Fees & Accounting**
- Pesapal charges a **transaction fee** on each payment (visible in the Pesapal dashboard).
- Maid pays **UGX 5,000**; the net amount you receive is **UGX 5,000 minus Pesapal fees**.
- All transactions (including fees) are visible under **Pesapal â†’ Transactions history**.

### **Technical Notes**
- Backend:
  - Model: `payments.models.MobileMoneyTransaction` (linked to `MaidProfile`).
  - Views: `MaidOnboardingInitiateView`, `PesapalIPNView`.
  - Uses **live Pesapal API v3** endpoints for Auth, SubmitOrderRequest, and GetTransactionStatus.
- Frontend:
  - Dashboard modal implemented in `web/src/pages/Dashboard.jsx`.
  - API helper: `paymentAPI.initiateMaidOnboarding` in `web/src/services/api.js`.
  - Automatically calls `window.open(redirect_url, '_blank')` on success.

---

**Verification status banners and onboarding payment are now fully wired to maid accounts.** 
**Maids can clearly see their status, pay their onboarding fee, and get verified.** 
**Payments are processed via Pesapal Mobile Money with full transaction history.** 
